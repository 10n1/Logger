<html>
	<head>
		<title>Riot::Log</title>
		<script type="text/javascript">
		var RiotLog;
		var gameData;
		var connection;

		var RiotSocket = {
			Port : 12345,
			URI : "ws://127.0.0.1"
		}

		RiotSocket.OnOpen = function( e ) {
			console.log( "connected" );
			gameData.innerHTML += "connected";
			connection.style.backgroundColor = "#6fbf4d";
			connection.style.fontWeight = "bold";
		}

		RiotSocket.OnError = function( e ) {
			console.log( "error!!" );
			console.err( e );
		}

		RiotSocket.OnMessage = function( e ) {
			console.log( e );
		}

		RiotSocket.SendMessage = function( message ) {
			console.log( message );
		}

		document.addEventListener( "DOMContentLoaded", function( e ) {
			// log
			gameData = document.getElementById( "game-data" );


			// connect to Riot
			connection = document.getElementById( "connection" );
			connection.addEventListener( "submit", function( e ) {
				// prevent form submission
				e.preventDefault();

				console.log( e );

				// initiate the socket connection
				var URI = e.target[0].value || RiotSocket.URI;
				var Port = e.target[1].value || RiotSocket.Port;
				RiotLog = new WebSocket( "ws://" + URI + ":" + Port );

				RiotLog.onopen = function( e ) {
					RiotSocket.OnOpen( e );
				}

				RiotLog.onerror = function( e ) {
					RiotSocket.OnError( e );
				}

				RiotLog.onmessage = function( e ) {
					RiotSocket.OnMessage( e );
				}

				return false;
			}, false );

		}, false );
		</script>
		<style type="text/css">
		* {
			margin: 0;
			padding: 0;
			font-family: Arial, Verdana, sans-serif;
			font-size: 1em;
		}

		form {
			background-color: #eee;
			text-align: center;
			padding: .5em;
		}

		input {
			padding: .3em;
		}

		#log {
			width: 75%;
			margin: 0 auto;
			padding: .2em;
		}

		#game-data {
			font-family: monospace;
			padding: .5em;
			background-color: #333;
			color: #3c3;
			height: 500px;
			overflow: auto;
		}

		</style>
	</head>
	<body>
		<form id="connection">
			<label for="host">Host:</label>
			<input type="text" id="host" value="127.0.0.1" />
			<label for="port">Port:</label>
			<input type="text" id="port" value="12345" />
			<input type="submit" value="connect" />
		</form>

		<div id="log">
			<h2>Riot log:</h2>
			<div id="game-data"></div>
		</div>
	</body>
</html>
